@page "/"
@using Components
@inject IJSRuntime JSRuntime

    <section class="topPart">
        <h2>Colorado's Premiere Logistics Verifier</h2>

            <CompanySearch LocationChanged="GetGeoJson"></CompanySearch>

             <Map></Map>

    </section>

<table class="table" id="resultsTable">
    <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col"> DOT ID</th>
            <th scope="col">Name</th>
            <th scope="col">City</th>
            <th scope="col">Address</th>
            <th scope="col">Phone</th>
            <th scope="col">Reason</th>
            <th scope="col">FlagCode</th>
        </tr>
    </thead>
    <tbody id="toPopulate">

      
    </tbody>
</table>


@code{
    async Task GetGeoJson(GeoJson results)
    {
        await JSRuntime.InvokeAsync<GeoJson>("GenerateMarkers", results);
        
        await JSRuntime.InvokeAsync<GeoJson>("PopulateTable", results);
    }

}

